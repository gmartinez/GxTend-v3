{include file="../skel/header.phtml"}
<script type="text/javascript">
$(document).ready(function(){

    $("#form").ajaxForm({
        dataType:  'json',
        beforeSubmit: function() {
            $.blockUI({ message: '{$smarty.const._MSG_WAIT_}' });
        },
        success: function (r) {
            setTimeout(window.close(), 3000);
            notify("Notification",r.msg,"info",3000);
        },
        error: function (jqXHR) {
            handleXHRerror(jqXHR);
        }
    });

    $('.datepick').datepicker({ minDate: '-0' });

    $("#onqeventstatus").change(function() {
            var $sboxval = $("#onqeventstatus").val();
            $(".when2exec").hide();
            $("#"+$sboxval).show();
        });

    $("#"+$("#onqeventstatus").val()).show();

    initializeButtons();

});
</script>

    <h2 style="float:right;">Event Queueing&nbsp;</h2>
    <br clear="all">
    <form id="form" action="post" method="POST" enctype="multipart/form-data">
    <table class="table center" style="width:100%;">
    <tr><td align="left">
        <b>Event Name</b>
        <td align="left">
        <input type="text" size="10" name="evtname" value="{$record.evtname}" readonly="readonly">
    <tr><td align="left">
        <b>Description</b>
        <td align="left">
        <textarea name="f|evtdsc" rows="3" cols="60" readonly="readonly">{$record.evtdsc}</textarea>
    <tr><td align="left">
        <b>Processor</b>
        <td align="left">
        <input type="text" size="80" name="evtproc" value="{$record.evtproc}" readonly="readonly">
    <tr><td align="left">
        <b>Parameters</b>
        <td align="left">
        <input type="text" size="80" name="evtparm" value="{$record.evtparm}">
    <tr><td align="left">
        <b>Priority</b>
        <td align="left">
        <input type="text" size="5" name="evtpri" value="{$record.evtpri}" readonly="readonly">
    <tr><td align="left">
        <b>Event Status</b>
        <td align="left" class="nb">
        {$onqeventstatus}
    <tr><td align="left">
        <b>Execution</b>
        <td align="left" class="nb">
        &nbsp;
            <div class="when2exec" style="display:none" id="1">
            <span class="red">Event will be queued but not processed until someone release it.</span>
            </div>
            <div class="when2exec" style="display:none" id="2">
            <span class="green">Event will be queued and processed.</span>
            </div>
            <div class="when2exec" style="display:none" id="6">
            <span class="blue">Date <input class="datepick" name="spec_date" value="{$spec_date}" type="text" size=12 maxlength=10 readonly="readonly"> Time {$spec_hh} {$spec_mm}</span>
            </div>
        &nbsp;
    <tr><td align="left">
        &nbsp;
        <td align="right">
        <button type="submit" class="button-add" name="submit_btn" value="Queue" title="Queue">Queue</button>
    </table>
	</form>

{include file="../skel/footer.phtml"}